define("my/common/common",["../../plugins/jquery.suggestion","../../public/suggestion","../../public/placeholder","./mod/backtop"],function(a){a("../../plugins/jquery.suggestion"),a("../../public/suggestion"),a("../../public/placeholder"),a("./mod/backtop");var b=$(".name-text"),c=Math.round(.5*b.width());$("#pl-login-info").on({mouseenter:function(){$(this).find(".list").stop().slideDown(150),$(this).find(".list").css("right","-"+(35-c)+"px")},mouseleave:function(){$(this).find(".list").stop().slideUp(150)}})}),define("plugins/jquery.suggestion",[],function(){!function(a){a.fn.suggestion=function(b,c){"function"==typeof b?(c=b,b={}):(b=b||{},c=c||function(){});var d={url:"",suggestionCls:"suggestion",activeCls:"active",FieldName:"word",parameter:{},dataFormat:"json",jsonpCallback:"data_callback",error:function(){},beforeSend:function(){},time:500,cache:!0,get:function(){},select:function(a){a.input.val(a.target.text())},showEvent:function(){},hideEvent:function(){}},e=a.extend({},d,b),f=a(window),g=a(document);return this.each(function(){var b=a(this),d=b.parents("form"),h=b.parent(),i={},j=a("<div class='"+e.suggestionCls+"'><ul></ul></div>").appendTo(h),k=j.find("ul"),l=k.find("li"),m=b.outerHeight(!0),n=b.outerWidth(!0),o=0,p=-1,q=!1,r=!1,s=!1,t={};d.css({position:"relative"}),b.prop({autocomplete:"off",disableautocomplete:!0}),"relative"!=j.css("position")&&j.css("position","absolute"),j.hide();var u=function(){m=b.outerHeight(!0),n=b.outerWidth(!0),_top=b.position().top,_left=b.position().left,"absolute"==j.css("position")&&j.css({top:_top+m+"px",left:_left+"px",width:n+"px"})},v=function(a){switch(a.isPropagationStopped(),a.preventDefault(),a.keyCode){case 13:case 38:case 40:break;default:D()}},w=function(a){switch(a.isPropagationStopped(),a.keyCode){case 13:z();break;case 38:q&&(p>0?p--:p=l.length-1,l.eq(p).addClass(e.activeCls).siblings().removeClass(e.activeCls),a.preventDefault());break;case 40:q&&(p<l.length-1?p++:p=0,l.eq(p).addClass(e.activeCls).siblings().removeClass(e.activeCls),a.preventDefault())}},x=function(a){a.isPropagationStopped(),a.preventDefault(),D()},y=function(b){b.isPropagationStopped();var c=a(this);p=c.index(),c.addClass(e.activeCls).siblings().removeClass(e.activeCls)},z=function(){var a=k.find("li."+e.activeCls);if(0!=a.length){var c={target:a,input:b};e.select(c),A()}},A=function(){q=!1,clearTimeout(o),j.hide(),e.hideEvent()},B=function(){q=!0,j.show(),e.showEvent(),u()},C=function(a){if("loading"!=a){var b={target:k,data:a};e.get(b),l=j.find("li"),r=l.length>0,B()}};window[e.jsonpCallback]=function(){};var D=function(){q=!0,o=setTimeout(function(){if(q){var c=a.trim(b.val());if(!c)return i.hide(),r=0,!0;p=-1,e.parameter[e.FieldName]=c;var d=a.param(e.parameter);if(e.cache&&t[e.url+"?"+d])return C(t[e.url+"?"+d]),!0;t[e.url+"?"+d]="loading";var f={};if(f.url=e.url,f.data=e.parameter,f.dataType=e.dataFormat,e.cache&&(f.cache=!0),e.jsonpCallback&&(f.jsonpCallback=e.jsonpCallback),e.error&&(f.error=e.error({target:k})),e.beforeSend){var g={target:k};f.beforeSend=e.beforeSend(g)}f.success=function(a){t[e.url+"?"+d]=a,C(a)},a.ajax(f)}},e.time)};i.getIsShow=function(){return q},i.getObj=function(){return j},i.show=function(){B(),s=!0},i.hide=function(){A()},i.getHasdata=function(){return r},b.on({keyup:v,keydown:w,input:x}),b.on("click",function(){var a=b.val();r&&a&&(B(),s=!0)}),k.on("click","li",function(){z()}).on("mouseenter","li",y),g.on("click",function(){s||i.hide(),s=!1}),f.resize(u),u(),c(i)})}}(jQuery)}),define("public/suggestion",[],function(){var a="undefined"!=typeof TU&&TU.wwwUrl?TU.wwwUrl:"http://www.liantu.cn",b={},c=$("#search_ico span"),d=$("#search_text"),e={daoyou:"找导游",banyou:"找伴游",tongyou:"找同游"},f=a+"/search/dest/";d.suggestion({url:f,FieldName:"w",suggestionStyleCls:"suggestion-box",dataFormat:"jsonp",time:50,beforeSend:function(a){var b=a.target;b.html('<div class="loading">正在加载中...</div>')},error:function(a){var b=a.target;b.html('<div class="nodata"><span>加载出错</span></div>')},get:function(b){c.addClass("active"),d.addClass("input-active");var f=b.target,g=b.data.data,h=Math.min(g.length,10);if(f.empty(),!h)return f.append('<div class="nodata"><span>暂时不支持该目的地</span></div>'),!1;for(var i=0;h>i;i++){var j=g[i];for(var k in e){var l=j.province+","+j.city;j.province||(l=j.city),j.pinyin?f.append('<li data-text="'+j.name+'"><a href="'+a+"/"+k+"/"+j.pinyin+'/">'+l+" "+j.name+"<span>"+e[k]+"</span></a></li>"):f.append('<li data-text="'+j.name+'"><a href="javascript:">'+l+" "+j.name+"<span>"+e[k]+"</span>(暂未开放)</a></li>")}}},select:function(a){var b=a.target.find("a"),c=b.attr("href");"javascript:"!=c&&b[0].click()},showEvent:function(){d.addClass("input-active")},hideEvent:function(){c.removeClass("active"),d.removeClass("input-active")}},function(a){b=a}),c.on("click",function(){b.getIsShow()?(b.hide(),c.removeClass("active")):b.getHasdata()&&(b.show(),c.addClass("active"))})}),define("public/placeholder",[],function(){var a=window.document,b=a.createElement("input");"undefined"==typeof b.placeholder&&$("input[type=text]").each(function(){var a=$(this),b=a.attr("placeholder"),c=a.attr("data-placeholder-color")||"#757575";(b&&""==a.val()||a.val()==b)&&a.css({color:c}).val(b),a.on({focus:function(){a.val()===b&&a.val("").removeAttr("style")},blur:function(){""==a.val()&&a.css({color:c}).val(b)}})})}),define("my/common/mod/backtop",[],function(){var a=$(".qrcode"),b=$(".mod-back"),c=$(".goback"),d=$(".footer");$("#code").on({mouseenter:function(){a.stop().fadeIn(300)},mouseleave:function(){a.stop().fadeOut(300)}});var e=$(window),f=$(document),g=navigator.userAgent.toLowerCase().indexOf("msie 6")>-1,h="";e.scroll(function(){var a=e.height(),c=f.scrollTop(),i=d.position()&&d.position().top?d.position().top:0;c>400?b.fadeIn():b.fadeOut(),c+a>=i-30?b.css({position:"absolute",top:i-200+"px"}):g?(clearTimeout(h),h=setTimeout(function(){b.animate({position:"absolute",top:c+a-200+"px"},500)},500)):b.css({position:"fixed",bottom:"20px",top:"auto"})}).resize(function(){window_height=e.height(),e.scroll()}),e.scroll(),c.on("click",function(a){return $("html,body").animate({scrollTop:0},500),a.preventDefault(),!1})});